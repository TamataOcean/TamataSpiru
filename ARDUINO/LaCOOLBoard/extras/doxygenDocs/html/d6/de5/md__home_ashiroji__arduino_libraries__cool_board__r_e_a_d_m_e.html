<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CoolBoard API: README</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CoolBoard API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h3>What is this repository for?</h3>
<p>Quick summary :</p>
<p><a class="el" href="../../d7/df9/class_cool_board.html" title="This class manages the CoolBoard and all of Its functions. ">CoolBoard</a> API is a set of libraries and wrappers to simplify the access and usage of all the capabilites of the <a class="el" href="../../d7/df9/class_cool_board.html" title="This class manages the CoolBoard and all of Its functions. ">CoolBoard</a>.</p>
<p>Version : 1.0</p>
<h3>How do I get set up?</h3>
<p>Configuration :</p>
<p>1/Download and Install the Arduino IDE (<a href="https://www.arduino.cc/en/Main/Software">https://www.arduino.cc/en/Main/Software</a> )</p>
<p>2/Download and Add the ESP8266 Hardware extension to Arduino (<a href="https://github.com/esp8266/Arduino">https://github.com/esp8266/Arduino</a> )</p>
<p>/!\ If you already have Arduino IDE and the ESP8266 Hardware extension , make sure you upgrade them to the latest version.</p>
<p>3/Download and Add the <a class="el" href="../../d7/df9/class_cool_board.html" title="This class manages the CoolBoard and all of Its functions. ">CoolBoard</a> Library set to the Arduino IDE :</p>
<p>a)First Method :</p>
<p>-Open the Arduino IDE</p>
<p>-Go to the "Sketch" Menu</p>
<p>-Include Library &gt; Manage Libraries.</p>
<p>-Search for <a class="el" href="../../d7/df9/class_cool_board.html" title="This class manages the CoolBoard and all of Its functions. ">CoolBoard</a></p>
<p>-Install</p>
<p>-Restart Arduino IDE</p>
<p>b)Second Method (if you have a CoolBoard.zip file ):</p>
<p>-Open the Arduino IDE</p>
<p>-Go to the "Sketch" Menu</p>
<p>-Include Library &gt; "Add .ZIP Library".</p>
<p>-Search for CoolBoard.zip</p>
<p>-Click Open</p>
<p>-Restart Arduino IDE</p>
<p>c)Third Method (if you have the bitbucket/github link):</p>
<p>-Open Arduino IDE &gt; File &gt; Preferences</p>
<p>-Check the "SketchBook Location" path</p>
<p>-Go to the Arduino/libraries folder (if it doesn't exist, create one )</p>
<p>-Clone the repo there ( git clone "bitbucket/github link" )</p>
<p>-Restart Arduino IDE</p>
<p>4/Download ESP8266FS Tool (<a href="https://arduino-esp8266.readthedocs.io/en/latest/filesystem.html#uploading-files-to-file-system">https://arduino-esp8266.readthedocs.io/en/latest/filesystem.html#uploading-files-to-file-system</a>)</p>
<p>5/Optional but Heavily Recommended : Download the ESP8266 Exception Decoder ( download link :<a href="https://github.com/me-no-dev/EspExceptionDecoder/releases/tag/1.0.6">https://github.com/me-no-dev/EspExceptionDecoder/releases/tag/1.0.6</a>) Install guide : <a href="https://github.com/me-no-dev/EspExceptionDecoder">https://github.com/me-no-dev/EspExceptionDecoder</a></p>
<p>Dependencies :</p>
<p>You need the following libraries to be able to use the <a class="el" href="../../d7/df9/class_cool_board.html" title="This class manages the CoolBoard and all of Its functions. ">CoolBoard</a> API:</p>
<p>-ArduinoJson(<a href="https://github.com/bblanchon/ArduinoJson">https://github.com/bblanchon/ArduinoJson</a>)</p>
<p>-NeoPixelBus(<a href="https://github.com/Makuna/NeoPixelBus">https://github.com/Makuna/NeoPixelBus</a>)</p>
<p>-TimeLib(<a href="https://github.com/PaulStoffregen/Time">https://github.com/PaulStoffregen/Time</a>)</p>
<p>-DS1337RTC(<a href="https://github.com/etrombly/DS1337RTC">https://github.com/etrombly/DS1337RTC</a>)</p>
<p>-DallasTemperature(<a href="https://github.com/milesburton/Arduino-Temperature-Control-Library">https://github.com/milesburton/Arduino-Temperature-Control-Library</a>)</p>
<p>Configuration Files :</p>
<p>-The <a class="el" href="../../d7/df9/class_cool_board.html" title="This class manages the CoolBoard and all of Its functions. ">CoolBoard</a> API heavily uses the SPIFFS for storing and retreiving configuration and data files</p>
<p>This is a description of the configuration files and what are they used for :</p>
<p>1/coolBoardConfig.json :</p>
<p>logInterval: The time Interval to wait,in seconds, between two logs</p>
<p>ireneActive: Put this flag to 1(true) if you are using the <a class="el" href="../../d6/d03/class_irene3000.html" title="This class is provided to manage the Irene3000 Ph/Temperature Shield. ">Irene3000</a> module</p>
<p>jetpackActive:Put this flag to 1(true) if you are using the <a class="el" href="../../df/d1d/class_jetpack.html" title="This class manages the Jetpack shield. ">Jetpack</a> modue</p>
<p>externalSensorsActive: Put this flag to 1(true) if you are using a supported external Sensor</p>
<p>sleepActive: Put this flag to 1(true) if you want your <a class="el" href="../../d7/df9/class_cool_board.html" title="This class manages the CoolBoard and all of Its functions. ">CoolBoard</a> to enable Sleep mode In Sleep Mode : your <a class="el" href="../../d7/df9/class_cool_board.html" title="This class manages the CoolBoard and all of Its functions. ">CoolBoard</a> will do the following : -readSensors -activate Actors(if any) -log the data -check for updates -go to sleep for logInterval period of time</p>
<p>userActive:Put this flag to 1(true) if you want your <a class="el" href="../../d7/df9/class_cool_board.html" title="This class manages the CoolBoard and all of Its functions. ">CoolBoard</a> to collect userData : userName <a class="el" href="../../d7/df9/class_cool_board.html" title="This class manages the CoolBoard and all of Its functions. ">CoolBoard</a> MAC Address TimeStamp</p>
<p>manual /!\ : Put this flag to 1(true) to control to turn on/off your actors and bypass your initial actors configuration </p><pre class="fragment">         Be Careful with this mode!!.

         When this mode is actif , the CoolBoard will not restart automatically to apply any new configuration sent via
         the update method.

         Restarting the coolBoard when in manual mode will deactivate all the actors!

         Never forget to reset this to 0(false) to go back to normal mode!
</pre><p>2/coolBoardLedConfig.json:</p>
<p>ledActive: Put this flag to 1(true) if you want to have Light Effects from the on Board LED</p>
<p>3/coolBoardSensorsConfig.json:</p>
<p>temperature : Put this flag to 1(true) if you want to collect the Temperature using the <a class="el" href="../../df/dcf/class_b_m_e280.html">BME280</a> Sensor</p>
<p>humidity : Put this flag to 1(true) if you want to collect the humidity using the <a class="el" href="../../df/dcf/class_b_m_e280.html">BME280</a> Sensor</p>
<p>pressure : Put this flag to 1(true) if you want to collect the pressure using the <a class="el" href="../../df/dcf/class_b_m_e280.html">BME280</a> Sensor</p>
<p>visible : Put this flag to 1(true) if you want to collect the visible light index using the SI114X Sensor</p>
<p>ir : Put this flag to 1(true) if you want to collect the infrared light index using the SI114X Sensor</p>
<p>uv : Put this flag to 1(true) if you want to collect the ultraviolet light index using the SI114X Sensor</p>
<p>vbat : Put this flag to 1(true) if you want to collect the battery voltage</p>
<p>soilMoisture : Put this flag to 1(true) if you want to collect the soil Moisture</p>
<p>4/externalSensorsConfig.json:</p>
<p>sensorsNumber: the number of supported external sensors you connect to the coolBoard</p>
<p>reference: the reference of a supported external sensor(e.g <a class="el" href="../../d6/ddb/class_n_d_i_r___i2_c.html">NDIR_I2C</a> , DallasTemperature )</p>
<p>type: the type of the measurments you are making (e.g : co2, temperature,voltage ... )</p>
<p>address : the sensor's address , if it has one (e.g : <a class="el" href="../../d6/ddb/class_n_d_i_r___i2_c.html">NDIR_I2C</a> CO2 sensor's address is 77 )</p>
<p>5/irene3000Config.json:</p>
<p>waterTemp.active: Put this flag to 1(true) in order to use the temperature sensor connected to the <a class="el" href="../../d6/d03/class_irene3000.html" title="This class is provided to manage the Irene3000 Ph/Temperature Shield. ">Irene3000</a></p>
<p>phProbe.active: Put this flag to 1(true) in order to use the ph sensor connected to the <a class="el" href="../../d6/d03/class_irene3000.html" title="This class is provided to manage the Irene3000 Ph/Temperature Shield. ">Irene3000</a></p>
<p>adc2.active: Put this flag to 1(true) in order to use the extra ADC input of the <a class="el" href="../../d6/d03/class_irene3000.html" title="This class is provided to manage the Irene3000 Ph/Temperature Shield. ">Irene3000</a></p>
<p>adc2.gain: this is the value of the gain applied to the extra ADC input of the <a class="el" href="../../d6/d03/class_irene3000.html" title="This class is provided to manage the Irene3000 Ph/Temperature Shield. ">Irene3000</a></p>
<p>adc2.type: the type of the measurments you are making (e.g : co2, temperature,voltage ... )</p>
<p>6/jetPackConfig.json and coolBoardActorConfig.json:</p>
<p>Act[i].actif: Put this flag to 1(true) in order to use the jetpack output N�i (0..7)</p>
<p>Act[i].inverted:Put this flag to 1(true) if the actor is inverted (e.g : a cooler is activated when Temp&gt;TempMax) Put this flag to 0(false) if the actor is notInverted(e.g : a heater is activated when Temp&lt;TempMin)</p>
<p>Act[i].temporal:Put this flag to 1(true) if you want the actor to be actif of a period of time , then inactif for another period of time.</p>
<p>Act[i].type:["primaryType","secondaryType"] : this array contains the priamryType and the secondaryType of the actor -The primaryType is the type associated to the sensors. (e.g : primaryType : "Temperature" is associated to the sensor of type "Temperature"). -It can also be empty , in case of PURE temporal actors</p>
<pre class="fragment">                                             -The secondaryType is only used in temporal mode.
                                             it can be : -"" (empty):the actor will be on for a period of timeHigh ms
                                                                     the actor will be off for a period of timeLow ms

                                                         -"hour" :the actor will be on when the Hour is equal or greater then hourHigh
                                                                  the actor will be off when the Hour is equal or greater then hourLow

                                                         -"minute":the actor will be on when the Minute is equal or greater then minuteHigh
                                                                  :the actor will be off when the Minute is equal or greater then minuteLow

                                                         -"hourMinute":the actor will be on when : Hour == hourHigh AND Minute &gt;= minuteHigh
                                                                                                   Hour &gt; hourHigh
                                                                       the actor will be off when : Hour == hourLow AND Minute &gt;= minuteLow
                                                                                                    Hour&gt;hourLow

                                              /!\ NOTE  that if both primaryType and secondaryType are valid : the actor will be in
                                                 mixed mode : it will need to valid both Time and measurment conditions to go on or off

Act[i].low:[rangeLow,timeLow,hourLow,minuteLow] : this array contains the values previously described:
                                                  -rangeLow is the minimum of the range at which 
                                                  to activate(deactivate in inverted mode) the actor

                                                  -timeLow is the time spent off in temporal mode

                                                  -hourLow is the hour to turn off the actor when secondaryType is hour or hourMinute

                                                  -minuteLow is the minute to turn off the actor when secondaryType is minute or hourMinute


Act[i].high:[rangeHigh,timeHigh,hourHigh,minuteHigh]: this array contains the values previously described:
                                                  -rangeHigh is the maximum of the range at which 
                                                  to deactivate(activate in inverted mode) the actor

                                                  -timeHigh is the time spent on in temporal mode

                                                  -hourHigh is the hour to turn on the actor when secondaryType is hour or hourMinute

                                                  -minuteHigh is the minute to turn on the actor when secondaryType is minute or hourMinute


   Note that the coolBoardActorConfig.json contains only one Actor.
</pre><p>7/mqttConfig.json:</p>
<p>mqttServer: This is the mqttServer (ip/url) address</p>
<p>user: This is the userId</p>
<p>bufferSize: This is the memory allocated to the mqtt buffer in bytes</p>
<p>inTopic : this is the topic that the coolBoard subscribes to (receives updates from )</p>
<p>outTopic : this is the topic that the coolBoard will publish to.</p>
<p>8/rtcConfig.json:</p>
<p>timeServer: NTP server ip address</p>
<p>localPort: port used to make the NTP request to update the time</p>
<p>9/wifiConfig.json:</p>
<p>wifiCount: the number of wifis saved in this configuration file</p>
<p>timeOut:access point timeout in seconds.</p>
<p>nomad: put this flag to 1(true) to activate nomad mode. in nomad mode : the coolBoard will only try to connect to known WiFis. if it fails it will NOT lunch the access point.</p>
<p>How to run the exemples : </p><pre class="fragment">-Open Arduino IDE 

-File &gt; Exemples &gt; CoolBoard

-Select the Exemple you want

-Flash it

-Flash the SPIFFS ( this is only required for the CoolBoardExemple, CoolBoardFarmExemple and CoolBoardStationExemple)

-Open The Serial Monitor

-Sit back and Enjoy!
</pre><h3>Contribution guidelines</h3>
<p>For minor fixes of code and documentation, please go ahead and submit a pull request.</p>
<p>Larger changes (rewriting parts of existing code from scratch, adding new functions to the core, adding new libraries) should generally be discussed by opening an issue first.</p>
<p>Feature branches with lots of small commits (especially titled "oops", "fix typo", "forgot to add file", etc.) should be squashed before opening a pull request. At the same time, please refrain from putting multiple unrelated changes into a single pull request.</p>
<h3>License and credits</h3>
<p>All files under src/internal are modified versions of existing libraries. All Credit of the original work goes to their respective authors.</p>
<p>All Other files are provided as is under the MIT license :</p>
<p>Copyright (c) 2017 La Cool Co SAS</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<p>We can only gurantee that we did our best to have everything working on our side.</p>
<h3>Who do I talk to?</h3>
<p>If you encounter a problem , have a good idea or just want to talk</p>
<p>Please open an issue, a pull request or send us an email :</p>
<p>La Cool Co <a href="#" onclick="location.href='mai'+'lto:'+'tea'+'m@'+'lac'+'oo'+'l.c'+'o'; return false;">team@<span style="display: none;">.nosp@m.</span>laco<span style="display: none;">.nosp@m.</span>ol.co</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Sep 14 2017 11:30:34 for CoolBoard API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
